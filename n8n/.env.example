# n8n Configuration
# Copy this file to .env and fill in the values

# === Core ===
N8N_HOST=n8n.example.com                #<= change to your domain
N8N_PROTOCOL=https
N8N_PORT=5678
DOMAIN_NAME=n8n.example.com             #<= change to your domain
WEBHOOK_URL=https://n8n.example.com/    #<= change to your domain

# === Locale ===
GENERIC_TIMEZONE=UTC                    #<= keep or change to your timezone

# === Security ===
# Generate with: openssl rand -hex 16 
# Or use your own strong key
# WARNING: If you change this key, you will lose access to all saved credentials!

N8N_ENCRYPTION_KEY=your-super-secret-and-long-password                  #<= change to the strong key
#N8N_USER_MANAGEMENT_JWT_SECRET=7ec920d1cee5255e37b26681afd74be4        #<= change to the strong key
N8N_SECURE_COOKIE=true
N8N_BLOCK_ENV_ACCESS_IN_NODE=true
N8N_BLOCK_FILE_ACCESS_TO_N8N_FILES=true                                 # Restrict file access
N8N_RESTRICT_FILE_ACCESS_TO=/files;/backup                              # Allow only these folders
NODES_EXCLUDE=[]                                                        # 
NODE_FUNCTION_ALLOW_BUILTIN=crypto                                      # Allow built-in crypto module

# === Performance ===  
EXECUTIONS_TIMEOUT=3600
N8N_RUNNERS_ENABLED=false  # Disabled to save RAM
NODE_OPTIONS=--max-old-space-size=512  # Memory Limit

# === Disable diagnostics ===
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
#N8N_METRICS=true
#QUEUE_HEALTH_CHECK_ACTIVE=true

# === Database (Postgres / Supabase) ===
# Setup database connection manually (openssl rand -hex 32 for secure password)
# Or use the script init-n8n-postgres-interactive.sh on /scripts/deploy/

DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=supabase-db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=postgres
DB_POSTGRESDB_SCHEMA=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=your-super-secret-and-long-postgres-password         #<= change to the strong key
